<!DOCTYPE html>
<meta charset="utf-8">
<style>

rect {
  fill: rgb(200,20,20);
  stroke: rgb(250,250,250);
  stroke-width: 1px;
}

circle {
  fill: rgb(31, 119, 180);
  fill-opacity: .25;
  stroke: rgb(31, 119, 180);
  stroke-width: 1px;
}

.leaf circle {
  fill: #ff7f0e;
  fill-opacity: 1;
}

text {
  font: 10px sans-serif;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 960 - margin.left - margin.right,
    height = 300 - margin.top - margin.bottom;

// var x = d3.scale.linear()
//     .domain([0, 1000])
//     .range(["0px", "960px"]);
var timeDomainStart = d3.time.day.offset(new Date(),0);
var timeDomainEnd = d3.time.hour.offset(new Date(),+6);

var tickFormat = "%H:%M";

var x = d3.time.scale().domain([ timeDomainStart, timeDomainEnd ]).range([ 0, width ]).clamp(true);

var y = d3.scale.ordinal()
    .rangeRoundBands([0, height], .1);

var xAxis = d3.svg.axis().scale(x).orient("bottom").tickFormat(d3.time.format(tickFormat)).tickSubdivide(true)
      .tickSize(1).tickPadding(10).ticks(d3.time.minutes, 30);

var yAxis = d3.svg.axis()
    .scale(y).orient("left").tickPadding(10);

//var data = [4, 8, 15, 16, 23, 42];

random_data = function(a) {
        var myArray = [{ label: 'keines', value: 30 },
                       { label: 'wenig', value: 90 },
                       { label: 'mittel', value: 60 },
                       { label: 'viel', value: 40 }];
        var limit = 100;
        for (var i = 0; i < myArray.length; i++) {
          myArray[i].value = Math.floor(Math.random()*limit) + 10;
        }
        return myArray;
      };

var data = random_data();

// Huong = 1, Martin = 2, Tom = 3, Thomas = 4
var data = [
  {"name": 1, "start": 50, "duration": 30, "category": "Fr端hst端ck"},
  {"name": 2, "start": 130, "duration": 50, "category": "Mittagessen"},
  {"name": 3, "start": 250, "duration": 10, "category": "Snack"},
  {"name": 4, "start": 600, "duration": 60, "category": "Abenbrot"}
  ];

y.domain(data.map(function(d) { 
switch(d.name){
      case 1:
        return "Huong";
        break;

        case 2:
        return "Martin";
        break;

        case 3:
        return "Tom";
        break;

        case 4:
        return "Thomas";
        break;

        default:
        return "fuck U!"
        break;
      }
   }));

var svg = d3.select("body").append("svg")
    .attr("width", 960)
    .attr("height", 480)
  .append("g")
    .attr("transform", "translate(2,2)");

svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(50," + height + ")")
      .call(xAxis);

svg.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(50,0)")
      .call(yAxis)

var names = svg.selectAll("text")
    .data(data);
names.enter().append("text")
.attr("y", function(d) {
  return (d.name * 60) + 75;
})
  .text(function(d) {
      switch(d.name){
      case 1:
        return "Huong";
        break;

        case 2:
        return "Martin";
        break;

        case 3:
        return "Tom";
        break;

        case 4:
        return "Thomas";
        break;

        default:
        return "fuck U!"
        break;
      }});

var rect = svg.selectAll("rect")
    .data(data);
var enter = rect.enter().append("rect");

enter.attr("x", function(d) {
  return d.start + 50;
});

enter.attr("y", function(d) {
  return (d.name * 60) - 50;
});

enter.attr("width", function(d) {
  return d.duration;
}); 
enter.attr("height", 50);

enter.attr("style", function(d) {
      if(d.category == "Fr端hst端ck") {
        return "fill: orange";
      }
      if(d.category == "Mittagessen") {
        return "fill: green";
      }
      if(d.category == "Abenbrot") {
        return "fill: red";
      }
      if(d.category == "Snack") {
        return "fill: blue";
      }
    })

/*
var text = svg.selectAll("text")
  .data(data)
  .enter().append("text")
    .attr("x", function(d) { return d.start + 5;} )
    .attr("y", 190)
    .attr("style", function(d) {
      if(d.category == "Mittagessen") {
        return "fill: red";
      }})
    .text(function(d) {return d.category;})
*/
</script>